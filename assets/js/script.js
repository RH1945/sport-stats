const teamSelect=document.querySelector("select"),clickSound=new Audio("assets/media/click-345983.mp3"),successSound=new Audio("assets/media/goodresult-82807.mp3");function fetchTeam(){clickSound.currentTime=0,clickSound.play()}function ensureCardContainers(){const a=document.getElementById("map");if(a&&!document.getElementById("team-card")){const t=document.createElement("aside");t.id="team-card",a.parentElement.appendChild(t)}}successSound.volume=.1,clickSound.preload="auto",teamSelect.addEventListener("click",fetchTeam),(()=>{const a={"Atlanta Hawks":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/atlanta-hawks-logo.png","Boston Celtics":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/boston-celtics-logo.png","Brooklyn Nets":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/brooklyn-nets-logo.png","Charlotte Hornets":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/charlotte-hornets-logo.png","Chicago Bulls":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/chicago-bulls-logo.png","Cleveland Cavaliers":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/cleveland-cavaliers-logo.png","Dallas Mavericks":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/dallas-mavericks-logo.png","Denver Nuggets":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/denver-nuggets-logo.png","Detroit Pistons":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/detroit-pistons-logo.png","Golden State Warriors":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/goldenstate-warriors-logo.png","Houston Rockets":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/houston-rockets-logo.png","Indiana Pacers":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/indiana-pacers-logo.png","Los Angeles Clippers":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/la-clippers-logo.png","Los Angeles Lakers":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/la-lakers-logo.png","Memphis Grizzlies":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/memphis-grizzlies-logo.png","Miami Heat":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/miami-heat-logo.png","Milwaukee Bucks":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/milwaukee-bucks-logo.png","Minnesota Timberwolves":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/minnesota-timberwolves-logo.png","New Orleans Pelicans":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/new-orleans-pelicans-logo.png","New York Knicks":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/ny-knicks-logo.png","Oklahoma City Thunder":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/oklahoma-city-thunder-logo.png","Orlando Magic":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/orlando-magic-logo.png","Philadelphia 76ers":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/philadelphia-76ers-logo.png","Phoenix Suns":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/phoenix-suns-logo.png","Portland Trail Blazers":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/portland-trailblaizers-logo.png","Sacramento Kings":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/sacramento-kings-logo.png","San Antonio Spurs":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/san-antonio-spurs-logo.png","Toronto Raptors":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/toronto-raptors-logo.png","Utah Jazz":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/utah-jazz-logo.png","Washington Wizards":"https://raw.githubusercontent.com/RH1945/sport-stats/refs/heads/main/assets/images/hackathon-basketball/washington-wizards-logo.png"},t=a=>""===a||null==a?null:Number(a),s=a=>""===a||null==a?null:100*Number(a);const e=function(a){const e=a.trim().split(/\r?\n/),n=e[0].split(",").map((a=>a.trim())),o=a=>n.indexOf(a),i=new Map;for(let a=1;a<e.length;a++){const n=e[a].split(",").map((a=>a.trim())),r=n[o("Team")]||"";if(!r||"league average"===r.toLowerCase())continue;const l={rk:n[o("Rk")]||"",team:r,w:t(n[o("W")]),l:t(n[o("L")]),tpar:s(n[o("3PAr")]),ts:s(n[o("TS%")]),arena:n[o("Arena")]||""};i.set(r,l)}return i}("Rk,Team,W,L,3PAr,TS%,Arena\n1,Oklahoma City Thunder,68,14,.419,.593,Paycom Center\n2,Boston Celtics,61,21,.536,.591,TD Garden\n3,Cleveland Cavaliers,64,18,.457,.607,Rocket Arena\n4,Minnesota Timberwolves,49,33,.455,.588,Target Center\n5,Los Angeles Clippers,50,32,.387,.589,Intuit Dome\n6,Memphis Grizzlies,48,34,.406,.588,FedEx Forum\n7,Houston Rockets,52,30,.384,.553,Toyota Center\n8,New York Knicks,51,31,.382,.589,Madison Square Garden (IV)\n9,Denver Nuggets,50,32,.356,.604,Ball Arena\n10,Golden State Warriors,48,34,.469,.568,Chase Center\n11,Milwaukee Bucks,48,34,.424,.598,Fiserv Forum\n12,Indiana Pacers,50,32,.400,.594,Gainbridge Fieldhouse\n13,Detroit Pistons,44,38,.394,.580,Little Caesars Arena\n14,Los Angeles Lakers,50,32,.425,.593,Crypto.com Arena\n15,Miami Heat,37,45,.429,.576,Kaseya Center\n16,Sacramento Kings,40,42,.391,.582,Golden 1 Center\n17,Orlando Magic,41,41,.411,.550,Kia Center\n18,Atlanta Hawks,40,42,.410,.579,State Farm Arena\n19,Dallas Mavericks,39,43,.389,.583,American Airlines Center\n20,Chicago Bulls,39,43,.457,.585,United Center\n21,San Antonio Spurs,34,48,.441,.575,Frost Bank Center\n22,Portland Trail Blazers,36,46,.418,.555,Moda Center\n23,Phoenix Suns,36,46,.440,.595,Footprint Center\n24,Toronto Raptors,30,52,.373,.553,Scotiabank Arena\n25,Philadelphia 76ers,24,58,.426,.563,Wells Fargo Center\n26,Brooklyn Nets,26,56,.458,.552,Barclays Center\n27,Utah Jazz,17,65,.449,.568,Delta Center\n28,Charlotte Hornets,19,63,.430,.537,Spectrum Center\n29,New Orleans Pelicans,21,61,.385,.552,Smoothie King Center\n30,Washington Wizards,18,64,.435,.546,Capital One Arena\n,League Average,,,.421,.576,"),n=(a,t=document)=>t.querySelector(a);function o({name:a,city:t,logoUrl:s,rk:e,w:o,l:i,tpar:r,ts:l,arena:c}){const d=n("#team-card");if(!d)return;const m=function(a,t){if(null==a||null==t)return null;const s=a+t;return s?a/s*100:null}(o,i),h=[e?`<span class="chip">Rank #${e}</span>`:"",c?`<span class="chip">${c}</span>`:""].join(""),g=[t&&`<div class="team-card__pill">City: ${t}</div>`,Number.isFinite(r)&&`<div class="team-card__pill">3PAr: ${r.toFixed(1)}%</div>`,Number.isFinite(l)&&`<div class="team-card__pill">TS%: ${l.toFixed(1)}%</div>`].filter(Boolean).join(""),p=`\n      <div class="stat"><div class="label">Wins</div><div class="value">${o??"—"}</div></div>\n      <div class="stat"><div class="label">Losses</div><div class="value">${i??"—"}</div></div>\n      <div class="stat"><div class="label">Win %</div><div class="value">${null!=m?m.toFixed(1):"—"}</div></div>\n    `,u=c?`${a} play at ${c}.`:`${a}.`;d.classList.add("open"),d.innerHTML=`\n      <div class="team-card__bg" style="background-image:url('${s||""}')"></div>\n      <div class="team-card__vignette"></div>\n      <div class="team-card__content">\n        <div class="team-card__header">\n          <h3 class="team-card__title">${a}</h3>\n          <button id="team-card-close" class="team-card__close" aria-label="Close">✕</button>\n        </div>\n        <div class="team-card__chips">${h}</div>\n        <div class="team-card__meta">${g}</div>\n        <div class="team-card__stats">${p}</div>\n        <p class="team-card__desc">${u}</p>\n      </div>`;const b=n("#team-card-close");b&&(b.onclick=()=>{d.classList.remove("open"),d.innerHTML=""})}!function(){const a=document.getElementById("map");if(a&&(a.parentElement.classList.add("map-shell"),!document.getElementById("team-card"))){const t=document.createElement("aside");t.id="team-card",a.parentElement.appendChild(t)}}(),function t(){window.simplemaps_usmap&&simplemaps_usmap.hooks?simplemaps_usmap.hooks.click_location=t=>{const s=(window.simplemaps_usmap_mapdata||{}).locations?.[String(t)],i=s?.description||s?.name||"Team",r=s?.name||"",l=a[i]||s?.image_url||"";!function(a,t){const s=n("#team-card");if(!s)return;s.classList.add("open"),s.innerHTML=`\n      <div class="team-card__bg" style="background-image:url('${t||""}')"></div>\n      <div class="team-card__vignette"></div>\n      <div class="team-card__content">\n        <div class="team-card__header">\n          <h3 class="team-card__title">${a}</h3>\n          <button id="team-card-close" class="team-card__close" aria-label="Close">✕</button>\n        </div>\n        <div class="team-card__chips">\n          <span class="chip">Loading…</span>\n        </div>\n        <div class="team-card__meta">\n          <div class="team-card__pill">Reading CSV…</div>\n        </div>\n        <div class="team-card__stats">\n          <div class="stat"><div class="label">Wins</div><div class="value">—</div></div>\n          <div class="stat"><div class="label">Losses</div><div class="value">—</div></div>\n          <div class="stat"><div class="label">Win %</div><div class="value">—</div></div>\n        </div>\n        <p class="team-card__desc">Loading…</p>\n      </div>`;const e=n("#team-card-close");e&&(e.onclick=()=>{s.classList.remove("open"),s.innerHTML=""})}(i,l);const c=e.get(i);o(c?{name:c.team,city:r,logoUrl:l,rk:c.rk,w:c.w,l:c.l,tpar:c.tpar,ts:c.ts,arena:c.arena}:{name:i,city:r,logoUrl:l,rk:null,w:null,l:null,tpar:null,ts:null,arena:""})}:document.addEventListener("DOMContentLoaded",t,{once:!0})}()})();const apiKey="7d6eef70-2823-4b93-b2c0-7de715a5ffc4",urlAdd="https://api.balldontlie.io/v1";async function getTeams(){const a=await fetch(`${urlAdd}/teams`,{headers:{Authorization:`Bearer ${apiKey}`}});if(!a.ok)throw new Error(`HTTP ${a.status}`);return a.json()}async function getGames({start_date:a,end_date:t,teamId:s=null}){let e=`${urlAdd}/games?start_date=${encodeURIComponent(a)}&end_date=${encodeURIComponent(t)}`;s&&(e+=`&team_ids[]=${encodeURIComponent(s)}`);const n=await fetch(e,{headers:{Authorization:`Bearer ${apiKey}`}});if(!n.ok)throw new Error(`Balldontlie HTTP ${n.status}`);return n.json()}const gamesList=document.getElementById("games-list"),teamsList=document.getElementById("team-select");async function populateTeams(){try{const a=await getTeams(),t=document.createElement("option");t.value="",t.textContent="No Team selected",t.selected=!0,a.data.forEach((function(a){const t=document.createElement("option");t.value=a.id,t.textContent=a.full_name,teamsList.appendChild(t)}))}catch(a){console.error("Error loading teams:",a)}}async function displayGames(a=null){if(gamesList){gamesList.innerHTML="<p>Loading games...</p>";try{const t=await getGames({start_date:"2025-10-01",end_date:"2025-10-31",teamId:a});gamesList.innerHTML="",t.data.forEach((a=>{const t=document.createElement("div");t.classList.add("game"),t.classList.add("game-link");const s=new Date(a.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});t.innerHTML=`\n                <strong>${a.home_team.full_name}</strong> vs <strong>${a.visitor_team.full_name}</strong><br>\n                ${s}<br>`,gamesList.appendChild(t)}))}catch(a){console.error("Error loading games:",a),gamesList.innerHTML="<p>Failed to load games. Please try again later.</p>"}}}teamsList.addEventListener("change",(()=>{displayGames(teamsList.value||null)})),document.addEventListener("DOMContentLoaded",(async function(){await populateTeams();const a=teamsList.value;""!==a?displayGames(a):gamesList.innerHTML=""}));